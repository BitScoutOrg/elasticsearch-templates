
namespace:
  name: kubernetes
  type: group
  description: >
    Namespace for kubernetes-specific metadata
  fields:
  - name: pod_name
    type: string
    norms:
      enabled: true
    description: >
      The name of the pod
      In case this logs carries a kubernetes event that was triggered by a pod only, it is overwritten by that pod's pod_name.

  - name: pod_id
    type: string
    norms:
      enabled: true
    description: >
      Kubernetes ID of the pod.
      In case this logs carries a kubernetes event that was triggered by a pod only, it is removed.

  - name: namespace_name
    type: string
    norms:
      enabled: true
    description: >
      The name of the namespace in Kubernetes.
      In case this logs carries a kubernetes event that was triggered by a pod only, it is overwritten by that pod's namespace.

  - name: namespace_id
    type: string
    norms:
      enabled: true
    description: >
      ID of the namespace in Kubernetes.
      In case this logs carries a kubernetes event that was triggered by a pod only, it is removed

  - name: host
    type: string
    norms:
      enabled: true
    description: >
      Kubernetes node name
      In case this logs carries kubernetes event that was triggered by a pod, it is overwritten by that pod's host.

  - name: master_url
    type: string
    description: >
      Kubernetes Master URL

  - name: container_name
    type: string
    norms:
      enabled: true
    description: >
      The name of the container in Kubernetes.
      In case this logs carries kubernetes event that was triggered by a pod, it is removed.
    fields:
      - name: raw
        ignore_above: 256
        type: string

  - name: annotations
    type: group
    description: >
      Annotations associated with the OpenShift object
      In case this logs carries kubernetes event that was triggered by a pod, it is removed.

  - name: labels
    type: group
    description: >
      Labels attached to the OpenShift object
      Each label name is a subfield of labels field.
      Each label name is de-dotted: dots in the name are replaced with
      underscores.
      In case this logs carries kubernetes event that was triggered by a pod, it is removed.
    fields:
      - name: deployment
        type: string
        example: logging-kibana-3
        description: >
          The deployment associated with this Kubernetes object
      - name: deploymentconfig
        type: string
        example: logging-kibana
        description: >
          The deploymentconfig associated with this Kubernetes object
        fields:
          - name: raw
            ignore_above: 64
            type: string
      - name: component
        type: string
        example: kibana
        description: >
          The component associated with this Kubernetes object
      - name: provider
        type: string
        example: openshift
        description: >
          The provider associated with this Kubernetes object

  - name: event
    type: group
    description: >
      The kubernetes event obtained from kubernetes master API
      The event is already JSON object and as whole nested under kubernetes field
      This description should loosely follow 'type Event' in https://github.com/kubernetes/kubernetes/blob/master/pkg/api/types.go
    fields:
      - name: verb
        type: string
        example: ADDED
        description: >
          The type of event, can be ADDED, MODIFIED, DELETED
      - name: metadata
        type: group
        description: >
          Information related to the location and time of the event creation
        fields:
          - name: name
            type: string
            example: java-mainclass-1.14d888a4cfc24890
            description: >
              Name of the object that triggered the event creation
          - name: namespace
            type: string
            example: default
            description: >
              The name of the namespace which induced the event
              It differs from namespace_name, which will be in case of every event the 'eventrouter'
          - name: selfLink
            type: string
            example: /api/v1/namespaces/javaj/events/java-mainclass-1.14d888a4cfc24890
            description: >
              Link to the event itself
          - name: uid
            type: string
            example: d828ac69-7b58-11e7-9cf5-5254002f560c
            description: >
              Event's unique ID
          - name: resourceVersion
            type: integer
            example: 311987
            description: >
              String that identifies the server's internal version of the event that can be used by clients to determine when objects have changed
          - name: creationTimestamp
            type: date
            format: yyyy-MM-dd HH:mm:ss,SSSZ||yyyy-MM-dd'T'HH:mm:ss.SSSSSSZ||yyyy-MM-dd'T'HH:mm:ssZ||dateOptionalTime
            example: 2017-08-07T10:11:57Z
            description: >
              UTC value marking when the event was created
      - name: involvedObject
        type: group
        description: >
          Description of the object involved in the event creation
        fields:
          - name: kind
            type: string
            example: ReplicationController
            description: >
              Type of the object
          - name: namespace
            type: string
            example: default
            description: >
              The name of the namespace in which the object triggered the event
              In case this event is not triggered by a pod then it differs from kubernetes.namespace_name, which will be in case of every event eventrouter's namespace
          - name: name
            type: string
            example: java-mainclass-1
            description: >
              Name of the object that triggered the event
          - name: uid
            type: string
            example: e6bff941-76a8-11e7-8193-5254002f560c
            description: >
              Object's unique ID
          - name: apiVersion
            type: string
            example: v1
            description: >
              Version of kubernetes master API
          - name: resourceVersion
            type: string
            example: 308882
            description: >
              String that identifies the server's internal version of the pod triggering the event that can be used by clients to determine when objects have changed
      - name: reason
        type: string
        example: SuccessfulCreate
        description: >
          Short, machine understandable string that gives the reason for this event being generated 
      - name: source_component
        type: string
        example: replication-controller
        description: >
          Component which reported this event
      - name: firstTimestamp
        type: date
        format: yyyy-MM-dd HH:mm:ss,SSSZ||yyyy-MM-dd'T'HH:mm:ss.SSSSSSZ||yyyy-MM-dd'T'HH:mm:ssZ||dateOptionalTime
        example: 2017-08-07T10:11:57Z
        description: >
          The time at which the event was first recorded
      - name: count
        type: integer
        example: 1
        description: >
          The number of times this event has occurred
      - name: type
        type: string
        example: Normal 
        description: >
          Type of this event (Normal, Warning), new types could be added in the future

doc_sections:
  - ["pod_log", "Openshift logging metadata"]
